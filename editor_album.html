<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Importação de fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <link
        href="https://fonts.googleapis.com/css2?family=Bad+Script&family=Diphylleia&family=Edu+VIC+WA+NT+Beginner&family=Gudea&family=Handlee&family=Patrick+Hand&family=Poiret+One&family=Tenor+Sans&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Icons -->
    <!--script para importar o header e footer -->
    <script src="components/header.js" type="text/javascript" defer></script>
    <script src="components/footer.js" type="text/javascript" defer></script>
    <script src="components/menu_lateral.js" type="text/javascript" defer></script>
    <script src="scripts/script.js" type="text/javascript" defer></script>
    <script src="tinymce/tinymce.min.js" referrerpolicy="origin"></script>

    <!-- Importação de arquivos css -->
    <link rel="stylesheet" href="css/global_style.css">
    <link rel="stylesheet" href="css/editor_album.css">
    <link rel="stylesheet" href="css/menu_perfil.css">

    <title>Nova Vida</title>
</head>

<body>
    <header></header>
    <main class="mainPerfil" style="height: fit-content;">
        <div class="flexJustfyStart">
            <aside class="asidePerfis">

            </aside>

            <section class="sectionEditorAlbum" style="width: 100%;">
                <div id="mostrarImagemEscolhida">

                </div>
                <form style="width: 650px; margin: 0px auto;" action="" method="post" enctype="multipart/form-data">
                    <div id="inputImagem" style="display: flex; flex-direction: column;padding: 0px 0px 20px 0px ;">
                        <label style="font-size: 20px; margin-bottom: 20px;" for="fotoAlbum">Insira uma foto</label>
                        <input onchange="mostrarImagem()"
                            style="background-color: #fff; border: 2px solid; border-radius: 5px;" type="file"
                            name="fotoAlbum" id="fotoAlbum" accept="image/jpeg, image/png">
                    </div>
                    <div style="display: flex; flex-direction: column;padding: 0px 0px 30px 0px ;">
                        <label style="font-size: 20px; margin-bottom: 20px;" for="fotoAlbum">Insira um texto para seu
                            post</label>
                        <textarea name="textoAlbum" id="textoAlbum"></textarea>
                    </div>
                    <div class="moldExtButtonEditor">
                        <a href="./album_bebe.html">
                            <button class="btn" type="button">Salvar</button>
                        </a>
                    </div>
                </form>
            </section>
        </div>
    </main>
</body>
<script>
    let textoSalvo = ''; // Variável para armazenar o texto do textarea.

    function mostrarImagem() {
        //Captura o input com o id 'fotoAlbum'.
        let imagemUpload = document.querySelector('#fotoAlbum');
        console.log(imagemUpload)
        //Captura a div com o id 'mostrarImagemEscolhida'
        let mostrarImagemEscolhida = document.querySelector('#mostrarImagemEscolhida');
        // Armazena o texto do textarea.
        textoSalvo = document.querySelector('#textoAlbum').value;
        //Cria um elemento div.
        let areaFoto = document.createElement('div');
        //Adiciona uma class "teste" ao elemento div criado acima.
        areaFoto.classList.add('teste');
        //Adiciona um HTML ao emento 'areaFoto'.
        areaFoto.innerHTML = `
              <section id="sectionConteudoAlbum" >
                  <div class="moldExtImgAlbum">
                      <div class="moldMedImgAlbum"> 
                          <div class="cantoneiraSuperior"></div>
                          <div class="cantoneiraInferior"></div>
                          <div class="moldIntImgAlbum">
                              <img src="./img/${imagemUpload.files[0].name}" alt="">
                          </div>
                      </div>
                  </div>

                  <div class="moldExtButtonAlbum">
                      <button onclick="buscarImagem()" class="btn" type="button">Alterar Imagem</button>
                  </div>
              </section>
          `;
        //Adiciona o elemento com todas as alterações a div com o id 'mostrarImagemEscolhida'.
        mostrarImagemEscolhida.appendChild(areaFoto);
        //Captura a div com o id 'inputImagem'.
        let inputImagem = document.querySelector('#inputImagem');
        //Aplica um estilo "display = 'none'" ao elemento 'inputImagem'.
        inputImagem.style.display = 'none';
        //Limpa o valor do imput file, para que se precisar escolher outra imagem o onchange chame a função "mostrarImagem()". 
        imagemUpload.value = '';
    }

    function buscarImagem() {
        // Restaurar o texto do textarea
        document.querySelector('#textoAlbum').value = textoSalvo;
        //Captura a div com o id 'mostrarImagemEscolhida'
        let mostrarImagemEscolhida = document.querySelector('#mostrarImagemEscolhida');
        //Exclui o elemento com todas as alterações a div com o id 'mostrarImagemEscolhida'.
        mostrarImagemEscolhida.innerHTML = '';
        //Captura a div com o id 'inputImagem'.
        let inputImagem = document.querySelector('#inputImagem');
        //Aplica um estilo "display = 'flex'" ao elemento 'inputImagem', para mostrar o "input" file novamente.
        inputImagem.style.display = 'flex';
    }


    tinymce.init({
        selector: '#textoAlbum',
        plugins: [
            'advlist', 'autolink', 'link', 'image', 'lists', 'charmap', 'preview', 'anchor', 'pagebreak',
            'searchreplace', 'wordcount', 'visualblocks', 'visualchars', 'code', 'fullscreen', 'insertdatetime',
            'media', 'table', 'emoticons', 'template', 'help'
        ],
        toolbar: ' undo redo | styles | bold italic | alignleft aligncenter alignright alignjustify | outdent indent',
        language: 'pt_BR'
    });
</script>
<footer></footer>
</body>

</html>